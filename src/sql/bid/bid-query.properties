selectWatchList=SELECT RNUM, AUCTION_ID, BIDDING_ID, BIDDING_PRICE, ATTACHMENT_RENAME, AR1_BRAND, AR1_MODEL, AUCTION_START_TIME, AUCTION_PERIOD, AUCTION_STATUS, BIDDING_AUCTION_ID FROM(SELECT ROWNUM RNUM, AUCTION_ID, BIDDING_ID, BIDDING_PRICE, ATTACHMENT_RENAME, AR1_BRAND, AR1_MODEL, AUCTION_START_TIME, AUCTION_PERIOD, AUCTION_STATUS, BIDDING_AUCTION_ID FROM(SELECT AC.AUCTION_ID, BID.BIDDING_ID, BID.BIDDING_PRICE, AT.ATTACHMENT_RENAME, AR.AR1_BRAND, AR.AR1_MODEL, AC.AUCTION_START_TIME, AC.AUCTION_PERIOD, AC.AUCTION_STATUS, BID.BIDDING_AUCTION_ID FROM AUCTION AC JOIN BIDDING_HISTORY BID ON(AC.AUCTION_ID=BID.BIDDING_AUCTION_ID) JOIN AR1 AR ON(AC.AUCTION_AR1_ID=AR.AR1_ID) JOIN APP AP ON(AR.APP_ID=AP.APP_ID) JOIN ATTACHMENT AT ON(AP.APP_ID=AT.ATTACHMENT_REF_APP) WHERE AT.ATTACHMENT_LEVEL=0 AND AC.AUCTION_STATUS LIKE 'AHT2' AND AR.AR1_WATCH_DETAIL IS NOT NULL AND BID.BIDDING_PRICE = (SELECT MAX(BIDDING_PRICE) FROM BIDDING_HISTORY WHERE AC.AUCTION_ID = BIDDING_AUCTION_ID GROUP BY BIDDING_AUCTION_ID)) ORDER BY RNUM DESC) WHERE RNUM BETWEEN ? AND ?
selectItemDetail=SELECT M.MEMBER_ID, ATTACHMENT_RENAME, AR.AR1_BRAND, AR.AR1_MODEL FROM AUCTION AC JOIN MEMBER M ON(AC.AUCTION_MEMBER_NO=M.MEMBER_NO) JOIN AR1 AR ON(AC.AUCTION_AR1_ID=AR.AR1_ID) JOIN APP AP ON(AR.APP_ID=AP.APP_ID) JOIN ATTACHMENT AT ON(AP.APP_ID=AT.ATTACHMENT_REF_APP) WHERE AC.AUCTION_ID=? AND AT.ATTACHMENT_TYPE='AT2'
selectMemberBiddingAuctionIds=SELECT DISTINCT(BIDDING_AUCTION_ID) FROM BIDDING_HISTORY WHERE BIDDING_MEMBER_NO = ?
selectOneBiddingList=SELECT BH.BIDDING_AUCTION_ID, BH.BIDDING_PRICE, AR.AR1_BRAND, AR.AR1_MODEL, ATTACHMENT_RENAME FROM BIDDING_HISTORY BH JOIN AUCTION AU ON (BH.BIDDING_AUCTION_ID = AU.AUCTION_ID) JOIN AR1 AR ON (AU.AUCTION_AR1_ID = AR.AR1_ID) JOIN APP AP ON (AR.APP_ID = AP.APP_ID) JOIN ATTACHMENT AT ON (AP.APP_ID = AT.ATTACHMENT_REF_APP) WHERE BIDDING_AUCTION_ID = ? AND BIDDING_ID = (SELECT MAX(BIDDING_ID) FROM BIDDING_HISTORY WHERE BIDDING_AUCTION_ID=?)
selectMaxBiddingPrice=SELECT MAX(BIDDING_PRICE) FROM BIDDING_HISTORY WHERE BIDDING_AUCTION_ID = ?
selectListBidUser=SELECT NUM, MEMBER_ID, MEMBER_NO, BIDDING_PRICE, BIDDING_TIME, BIDDING_COUNT FROM(SELECT ROWNUM NUM, MEMBER_ID, MEMBER_NO, BIDDING_PRICE, BIDDING_TIME, BIDDING_COUNT FROM(SELECT M.MEMBER_ID, M.MEMBER_NO, BID.BIDDING_PRICE, BID.BIDDING_TIME, BID.BIDDING_COUNT FROM BIDDING_HISTORY BID JOIN MEMBER M ON(BID.BIDDING_MEMBER_NO=M.MEMBER_NO) WHERE BID.BIDDING_AUCTION_ID = ? ORDER BY BID.BIDDING_PRICE DESC)) WHERE NUM <= 5 AND BIDDING_COUNT <> 0
insertBidding=INSERT INTO BIDDING_HISTORY VALUES(--SEQUENCE INSERT --, ?, ?, ?, ?, SYSDATE)
checkWishStatus=SELECT WISHLIST_STATUS FROM WISHLIST WHERE WISHLIST_AUCTION_ID=? AND WISHLIST_MEMBER_NO=?
changeWishN=UPDATE WISHLIST SET WISHLIST_STATUS='N' WHERE WISHLIST_AUCTION_ID=? AND WISHLIST_MEMBER_NO=?
changeWishY=UPDATE WISHLIST SET WISHLIST_STATUS='Y' WHERE WISHLIST_AUCTION_ID=? AND WISHLIST_MEMBER_NO=?
insertWish=INSERT INTO WISHLIST VALUES(?, ?, 'Y')
selectBagList=SELECT AC.AUCTION_ID, BID.BIDDING_ID, BID.BIDDING_PRICE, AT.ATTACHMENT_RENAME, AR.AR1_BRAND, AR.AR1_MODEL, AC.AUCTION_START_TIME, AC.AUCTION_PERIOD, AC.AUCTION_STATUS FROM AUCTION AC JOIN BIDDING_HISTORY BID ON(AC.AUCTION_ID=BID.BIDDING_AUCTION_ID) JOIN AR1 AR ON(AC.AUCTION_AR1_ID=AR.AR1_ID) JOIN APP AP ON(AR.APP_ID=AP.APP_ID) JOIN ATTACHMENT AT ON(AP.APP_ID=AT.ATTACHMENT_REF_APP) WHERE AT.ATTACHMENT_LEVEL=0 AND AC.AUCTION_STATUS LIKE 'AHT2' AND AR.AR1_BAG_DETAIL IS NOT NULL AND BID.BIDDING_PRICE IN (SELECT MAX(BIDDING_PRICE) FROM BIDDING_HISTORY GROUP BY BIDDING_AUCTION_ID)
selectWatchInfo=SELECT W.WATCH_GUARANTEE_YN, W.WATCH_BOX_YN, W.WATCH_MATERIAL, W.WATCH_MOVEMENT, W.WATCH_CHRONOGRAPH FROM AUCTION AC JOIN AR1 AR ON(AC.AUCTION_AR1_ID=AR.AR1_ID) JOIN APP AP ON(AR.APP_ID=AP.APP_ID) JOIN WATCH W ON(AP.APP_ID=W.WATCH_ID) WHERE AC.AUCTION_ID=?
selectBagInfo=SELECT B.BAG_SIZE, B.BAG_STRAP, B.BAG_GENDER FROM AUCTION AC JOIN AR1 AR ON(AC.AUCTION_AR1_ID=AR.AR1_ID) JOIN APP AP ON(AR.APP_ID=AP.APP_ID) JOIN BAG B ON(AP.APP_ID=B.BAG_ID) WHERE AC.AUCTION_ID=?
selectCount=SELECT MAX(BIDDING_COUNT) FROM BIDDING_HISTORY WHERE BIDDING_MEMBER_NO = ? AND BIDDING_AUCTION_ID = ?
insertBiddingHistory=INSERT INTO BIDDING_HISTORY VALUES (SEQ_BIDDING_HISTORY.NEXTVAL, ?, ?, (SELECT CASE WHEN MAX(BIDDING_COUNT) IS NULL THEN 0 ELSE MAX(BIDDING_COUNT) END FROM BIDDING_HISTORY WHERE BIDDING_MEMBER_NO = ? AND BIDDING_AUCTION_ID = ?) + 1, ?, (SYSDATE + 9/24 + 1/1440 + 14/86400))
selectSixWatchList=SELECT RNUM, AUCTION_ID, BIDDING_ID, BIDDING_PRICE, ATTACHMENT_RENAME, AR1_BRAND, AR1_MODEL, AUCTION_START_TIME, AUCTION_PERIOD FROM(SELECT ROWNUM RNUM, AUCTION_ID, BIDDING_ID, BIDDING_PRICE, ATTACHMENT_RENAME, AR1_BRAND, AR1_MODEL, AUCTION_START_TIME, AUCTION_PERIOD FROM(SELECT AC.AUCTION_ID, BID.BIDDING_ID, BID.BIDDING_PRICE, AT.ATTACHMENT_RENAME, AR.AR1_BRAND, AR.AR1_MODEL, AC.AUCTION_START_TIME, AC.AUCTION_PERIOD FROM AUCTION AC JOIN BIDDING_HISTORY BID ON(AC.AUCTION_ID=BID.BIDDING_AUCTION_ID) JOIN AR1 AR ON(AC.AUCTION_AR1_ID=AR.AR1_ID) JOIN ATTACHMENT AT ON(AR.APP_ID=AT.ATTACHMENT_REF_APP) WHERE AT.ATTACHMENT_LEVEL=0 AND AC.AUCTION_STATUS LIKE 'AHT2' AND AR.AR1_WATCH_DETAIL IS NOT NULL AND BID.BIDDING_PRICE IN (SELECT MAX(BIDDING_PRICE) FROM BIDDING_HISTORY WHERE BIDDING_AUCTION_ID=AUCTION_ID GROUP BY BIDDING_AUCTION_ID) ORDER BY AUCTION_START_TIME DESC) ORDER BY RNUM DESC) WHERE RNUM < 7
selectSixBagList=SELECT RNUM, AUCTION_ID, BIDDING_ID, BIDDING_PRICE, ATTACHMENT_RENAME, AR1_BRAND, AR1_MODEL, AUCTION_START_TIME, AUCTION_PERIOD FROM(SELECT ROWNUM RNUM, AUCTION_ID, BIDDING_ID, BIDDING_PRICE, ATTACHMENT_RENAME, AR1_BRAND, AR1_MODEL, AUCTION_START_TIME, AUCTION_PERIOD FROM(SELECT AC.AUCTION_ID, BID.BIDDING_ID, BID.BIDDING_PRICE, AT.ATTACHMENT_RENAME, AR.AR1_BRAND, AR.AR1_MODEL, AC.AUCTION_START_TIME, AC.AUCTION_PERIOD FROM AUCTION AC JOIN BIDDING_HISTORY BID ON(AC.AUCTION_ID=BID.BIDDING_AUCTION_ID) JOIN AR1 AR ON(AC.AUCTION_AR1_ID=AR.AR1_ID) JOIN ATTACHMENT AT ON(AR.APP_ID=AT.ATTACHMENT_REF_APP) WHERE AT.ATTACHMENT_LEVEL=0 AND AC.AUCTION_STATUS LIKE 'AHT2' AND AR.AR1_BAG_DETAIL IS NOT NULL AND BID.BIDDING_PRICE IN (SELECT MAX(BIDDING_PRICE) FROM BIDDING_HISTORY WHERE BIDDING_AUCTION_ID=AUCTION_ID GROUP BY BIDDING_AUCTION_ID) ORDER BY AUCTION_START_TIME DESC) ORDER BY RNUM DESC) WHERE RNUM < 7
listCount=SELECT COUNT(*) FROM AUCTION AC JOIN BIDDING_HISTORY BID ON(AC.AUCTION_ID=BID.BIDDING_AUCTION_ID) JOIN AR1 AR ON(AC.AUCTION_AR1_ID=AR.AR1_ID) JOIN APP AP ON(AR.APP_ID=AP.APP_ID) JOIN ATTACHMENT AT ON(AP.APP_ID=AT.ATTACHMENT_REF_APP) WHERE AT.ATTACHMENT_LEVEL=0 AND AC.AUCTION_STATUS LIKE 'AHT2' AND AR.AR1_WATCH_DETAIL IS NOT NULL AND BID.BIDDING_PRICE = (SELECT MAX(BIDDING_PRICE) FROM BIDDING_HISTORY WHERE AC.AUCTION_ID = BIDDING_AUCTION_ID GROUP BY BIDDING_AUCTION_ID)
wishStatus=SELECT WISHLIST_STATUS FROM WISHLIST WHERE WISHLIST_MEMBER_NO=? AND WISHLIST_AUCTION_ID=?
selectBidCount=SELECT COUNT(*) FROM BIDDING_HISTORY WHERE BIDDING_AUCTION_ID = ? AND BIDDING_MEMBER_NO = ? AND BIDDING_COUNT <> 0
